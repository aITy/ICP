SRC_GUI_QT = src/gui_qt/
SRC_CLI = src/cli/
ARCHIVE ?= xpacne00

#CC = g++
#CFLAGS ?= -O2 -std=c++11 -Wall -Wextra -Werror -Wlong-long \
	-Wno-array-bounds -Wsign-conversion -Wconversion \
	-Wimplicit-function-declaration -pedantic
#-lm

all:
	#cd $(SRC_GUI_QT) && qmake -o Makefile && make
	cd $(SRC_CLI) && qmake -o Makefile && make

run:
	$(SRC_GUI_QT)/dama2013

run-cli:
	$(SRC_CLI)/dama2013-cli

pack: clean
	zip -q $(ARCHIVE).zip -9 ../$(ARCHIVE)

# delete almost all files generated by configure and make
clean:
	#FIXME doxygen products
	rm -f $(ARCHIVE)
	#FIXME does it remove binaries too?
	make -C $(SRC_GUI_QT) distclean
	make -C $(SRC_CLI) distclean

doc:
	dogygen
