SRC_GUI_QT = src/gui_qt/
SRC_CLI = src/cli/
ARCHIVE ?= xpacne00

#CC = g++
#CFLAGS ?= -O2 -std=c++11 -Wall -Wextra -Werror -Wlong-long \
	-Wno-array-bounds -Wsign-conversion -Wconversion \
	-Wimplicit-function-declaration -pedantic
#-lm

all:
	cd $(SRC_GUI_QT) && qmake && make
	cd $(SRC_CLI) && qmake && make

run:
	$(SRC_GUI_QT)/dama2013

run-cli:
	$(SRC_CLI)/dama2013-cli

pack: clean
	cd ../ && zip -r -9 -q $(ARCHIVE).zip $(ARCHIVE)

# delete almost all files generated by configure and make
clean: FORCE
	rm -rf $(ARCHIVE) doc/ $(SRC_CLI)/dama2013-cli $(SRC_GUI_QT)/dama2013 || true
	make -C $(SRC_CLI) distclean || true
	make -C $(SRC_GUI_QT) distclean || true

doc: FORCE
	doxygen

FORCE:
